(this["webpackJsonprn-chess"]=this["webpackJsonprn-chess"]||[]).push([[0],{50:function(e,t,r){e.exports=r(62)},55:function(e,t,r){},62:function(e,t,r){"use strict";r.r(t);var n=r(0),i=r.n(n),o=r(29),a=r.n(o),l=(r(55),r(48)),c=r(5),s=r(16),u=r(47),d=r(49),h=r(30),f=r(65),v=r(64),p=r(3),w=r(25),b=function(){function e(){Object(c.a)(this,e),this.hasMoved=!1}return Object(s.a)(e,[{key:"text",get:function(){switch(this.color){case"white":switch(this.type){case"king":return"\u2654";case"queen":return"\u2655";case"rook":return"\u2656";case"bishop":return"\u2657";case"knight":return"\u2658";case"pawn":return"\u2659"}break;case"black":switch(this.type){case"king":return"\u265a";case"queen":return"\u265b";case"rook":return"\u265c";case"bishop":return"\u265d";case"knight":return"\u265e";case"pawn":return"\u265f"}}}}]),e}();b.new=function(e,t){var r=new b;return r.color=e,r.type=t,r};var k=function e(t){var r,n=this;Object(c.a)(this,e),this.pieceAt=function(e){return n.rows[e[0]][e[1]]},this.possibleMoves=function(e,t){return n.allFields().filter((function(r){return n.isValidMove(e,t,r)}))},this.hasPossibleMove=function(e,t){return n.allFields().some((function(r){return n.isValidMove(e,t,r)}))},this.isCheckMate=function(e){return!n.allFields().some((function(t){var r=n.pieceAt(t);return!(!r||r.color!==e)&&n.hasPossibleMove(r,t)}))},this.move=function(e,t,r){var i,o=n.pieceAt(e);if(o&&(null!==r&&void 0!==r?r:n.isValidMove(o,e,t))){var a=n.pieceAt(t);if(null!=a&&a.color===o.color)return"impossible";if(o.hasMoved=!0,n.rows[t[0]][t[1]]=o,n.rows[e[0]][e[1]]=null,"pawn"===o.type&&(0===t[0]||7===t[0]))return o.type="queen","promotion";if(!0!==r){var l="white"===o.color?"black":"white",c=n.findKing(l);if(n.isUnderAttack(c,l))return n.isCheckMate(l)?"checkmate":"check"}return a?"captured":"move"}return(null===(i=n.pieceAt(t))||void 0===i?void 0:i.color)===o.color?"own":"impossible"},this.findKing=function(e){return n.allFields().find((function(t){var r=n.pieceAt(t);return"king"===(null===r||void 0===r?void 0:r.type)&&(null===r||void 0===r?void 0:r.color)===e}))},this.allFields=function(){for(var e=[],t=0;t<8;t++)for(var r=0;r<8;r++)e.push([t,r]);return e},this.isUnderAttack=function(e,t){return null!=n.allFields().find((function(r){var i=n.pieceAt(r);return!(!i||i.color===t)&&n.isValidMove(i,r,e)}))},this.canMove=function(e,t,r){var i=t[0]-r[0],o=t[1]-r[1],a=Math.abs(o),l=Math.abs(i),c=function(){if(0!==a&&0!==l)return!1;for(var e=l>0?0:1,c=(e?o:i)>0?1:-1,s=t[e]-c;(s-r[e])*c>0;s-=c){var u=l>0?[s,t[1]]:[t[0],s];if(n.pieceAt(u))return!1}return!0},s=function(){if(a!==l)return!1;for(var e=i<0?1:-1,r=o<0?1:-1,c=1;c<l;c++){var s=[t[0]+c*e,t[1]+c*r];if(n.pieceAt(s))return!1}return!0};switch(e.type){case"king":return a<=1&&l<=1&&!n.isUnderAttack(r,e.color);case"queen":return c()||s();case"rook":return c();case"bishop":return s();case"knight":return 2===a&&1===l||1===a&&2===l;case"pawn":var u="white"===e.color?1:-1,d=i*u;if(1===a&&1===d)return null!=n.pieceAt(r);if(a>0)return!1;if(2!==d||e.hasMoved){if(1!==d)return!1}else if(n.pieceAt([t[0]-u,t[1]]))return!1;return null==n.pieceAt(r);default:return!1}},this.isValidMove=function(t,r,i){var o;if(!i)return!1;if((null===(o=n.pieceAt(i))||void 0===o?void 0:o.color)===t.color)return!1;if(!n.canMove(t,r,i))return!1;var a=new e(n.rows);a.move(r,i,!0);var l=a.findKing(t.color);return!l||!a.isUnderAttack(l,t.color)},this.initialRow=function(e){return[b.new(e,"rook"),b.new(e,"knight"),b.new(e,"bishop"),b.new(e,"queen"),b.new(e,"king"),b.new(e,"bishop"),b.new(e,"knight"),b.new(e,"rook")]},this.pawnRow=function(e){return Object(w.a)(Array(8).keys()).map((function(t){return b.new(e,"pawn")}))},this.initialState=function(){var e=Object(w.a)(Array(8).keys()).map((function(){return Object(w.a)(Array(8).keys()).map((function(e){return null}))}));return e[0]=n.initialRow("black"),e[1]=n.pawnRow("black"),e[6]=n.pawnRow("white"),e[7]=n.initialRow("white"),e},this.rows=t?(r=t,JSON.parse(JSON.stringify(r))):this.initialState()},g=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).board=new k,n.onFieldSelected=function(e){n.setState((function(t){var r;if(!t.selectedField)return n.board.pieceAt(e)&&(null===(r=n.board.pieceAt(e))||void 0===r?void 0:r.color)!==n.state.currentColor?{selectedField:t.selectedField}:{selectedField:n.board.pieceAt(e)?e:null};if(!n.board.pieceAt(t.selectedField))return{selectedField:e};var i=n.board.move(t.selectedField,e),o=["move","captured","promotion","check","checkmate"].includes(i);return{selectedField:o?null:"own"===i?e:t.selectedField,currentColor:o?"white"===t.currentColor?"black":"white":t.currentColor,status:i}}))},n.pieceStyle=function(e){var t=Object(l.a)(e,2),r=t[0],i=t[1],o=!1;if(null!=n.state.selectedField){var a=n.board.pieceAt(n.state.selectedField);null!=a&&(o=n.board.isValidMove(a,n.state.selectedField,e))}return[m.piece,n.state.selectedField&&r===n.state.selectedField[0]&&i===n.state.selectedField[1]?m.selected:null,o?m.possible:null]},n.cellStyle=function(e){return[(e[0]+e[1])%2===0?m.cell1:m.cell2]},n.state={currentColor:"white",selectedField:null,status:null},n}return Object(s.a)(r,[{key:"render",value:function(){var e,t=this;return i.a.createElement(h.a,{style:m.container},this.board.rows.map((function(e,r){return i.a.createElement(h.a,{key:r,style:m.row},e.map((function(e,n){var o;return i.a.createElement(f.a,{key:n,onPress:function(){return t.onFieldSelected([r,n])},style:t.cellStyle([r,n]),activeOpacity:1},i.a.createElement(v.a,{style:t.pieceStyle([r,n])},null!==(o=null===e||void 0===e?void 0:e.text)&&void 0!==o?o:""))})))})),i.a.createElement(v.a,null,"Current move: ",this.state.currentColor),i.a.createElement(v.a,null,null!==(e=this.state.status)&&void 0!==e?e:"-"),i.a.createElement(v.a,{style:{backgroundColor:"orange",width:50,textAlign:"center",marginTop:8},onPress:function(){t.board.rows=t.board.initialState(),t.setState({selectedField:null,currentColor:"white",status:null})}},"Reset"))}}]),r}(i.a.Component),m=p.a.create({container:{flex:1,width:400,height:400,backgroundColor:"white",marginHorizontal:"auto",marginTop:60},row:{flexDirection:"row"},piece:{textAlign:"center",fontSize:30,width:50,height:50},cell1:{width:50,height:50,backgroundColor:"rgba(0, 0, 0, 0.1)"},cell2:{width:50,height:50,backgroundColor:"rgba(0, 0, 0, 0.4)"},selected:{backgroundColor:"rgba(255, 255, 0, 1)"},possible:{backgroundColor:"rgba(0, 255, 0, 0.5)"}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[50,1,2]]]);
//# sourceMappingURL=main.5bce8872.chunk.js.map