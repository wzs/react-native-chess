(this["webpackJsonprn-chess"]=this["webpackJsonprn-chess"]||[]).push([[0],{50:function(e,t,r){e.exports=r(62)},55:function(e,t,r){},62:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),i=r(29),a=r.n(i),c=(r(55),r(48)),l=r(5),u=r(16),s=r(47),d=r(49),h=r(30),p=r(65),w=r(64),f=r(3),v=r(25),b=function(){function e(){Object(l.a)(this,e),this.hasMoved=!1}return Object(u.a)(e,[{key:"text",get:function(){switch(this.color){case"white":switch(this.type){case"king":return"\u2654";case"queen":return"\u2655";case"rook":return"\u2656";case"bishop":return"\u2657";case"knight":return"\u2658";case"pawn":return"\u2659"}break;case"black":switch(this.type){case"king":return"\u265a";case"queen":return"\u265b";case"rook":return"\u265c";case"bishop":return"\u265d";case"knight":return"\u265e";case"pawn":return"\u265f"}}}}]),e}();b.new=function(e,t){var r=new b;return r.color=e,r.type=t,r};var k=function e(){var t=this;Object(l.a)(this,e),this.pieceAt=function(e){return t.rows[e[0]][e[1]]},this.isChecked=function(){!function(e){for(var r=0;r<8;r++)for(;r<8;r++){var n=t.pieceAt([r,0]);if("king"===(null===n||void 0===n?void 0:n.type)&&(null===n||void 0===n?void 0:n.color)===e)return[r,0]}console.error("No king, no fun")}("black")},this.move=function(e,r){var n,o=t.pieceAt(e);if(o&&t.canMove(o,e,r)){var i=t.pieceAt(r);return null!=i&&i.color===o.color?"impossible":(o.hasMoved=!0,t.rows[r[0]][r[1]]=o,t.rows[e[0]][e[1]]=null,"pawn"!==o.type||0!==r[0]&&7!==r[0]?i?"captured":"move":(o.type="queen","promotion"))}return(null===(n=t.pieceAt(r))||void 0===n?void 0:n.color)===o.color?"own":"impossible"},this.canMove=function(e,r,n){var o;if((null===(o=t.pieceAt(n))||void 0===o?void 0:o.color)===e.color)return!1;var i=r[0]-n[0],a=r[1]-n[1],c=Math.abs(a),l=Math.abs(i),u=function(){if(0!==c&&0!==l)return!1;for(var e=l>0?0:1,o=(e?a:i)>0?1:-1,u=r[e]-o;(u-n[e])*o>0;u-=o){var s=l>0?[u,r[1]]:[r[0],u];if(t.pieceAt(s))return!1}return!0},s=function(){if(c!==l)return!1;for(var e=i<0?1:-1,n=a<0?1:-1,o=1;o<l;o++){var u=[r[0]+o*e,r[1]+o*n];if(t.pieceAt(u))return!1}return!0};switch(e.type){case"king":return c<=1&&l<=1;case"queen":return u()||s();case"rook":return u();case"bishop":return s();case"knight":return 2===c&&1===l||1===c&&2===l;case"pawn":var d="white"===e.color?1:-1,h=i*d;if(1===c&&1===h)return null!=t.pieceAt(n);if(c>0)return!1;if(2!==h||e.hasMoved){if(1!==h)return!1}else if(t.pieceAt([r[0]-d,r[1]]))return!1;return null==t.pieceAt(n);default:return!1}},this.initialRow=function(e){return[b.new(e,"rook"),b.new(e,"knight"),b.new(e,"bishop"),b.new(e,"queen"),b.new(e,"king"),b.new(e,"bishop"),b.new(e,"knight"),b.new(e,"rook")]},this.pawnRow=function(e){return Object(v.a)(Array(8).keys()).map((function(t){return b.new(e,"pawn")}))},this.initialState=function(){var e=Object(v.a)(Array(8).keys()).map((function(){return Object(v.a)(Array(8).keys()).map((function(e){return null}))}));return e[0]=t.initialRow("black"),e[1]=t.pawnRow("black"),e[6]=t.pawnRow("white"),e[7]=t.initialRow("white"),e},this.rows=this.initialState()},g=function(e){Object(d.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(l.a)(this,r),(n=t.call(this,e)).board=new k,n.onFieldSelected=function(e){n.setState((function(t){var r;if(!t.selectedField)return n.board.pieceAt(e)&&(null===(r=n.board.pieceAt(e))||void 0===r?void 0:r.color)!==n.state.currentColor?{selectedField:t.selectedField}:{selectedField:n.board.pieceAt(e)?e:null};if(!n.board.pieceAt(t.selectedField))return{selectedField:e};var o=n.board.move(t.selectedField,e),i=["move","captured","promotion"].includes(o);return{selectedField:i?null:"own"===o?e:t.selectedField,currentColor:i?"white"===t.currentColor?"black":"white":t.currentColor}}))},n.pieceStyle=function(e){var t=Object(c.a)(e,2),r=t[0],o=t[1],i=!1;if(null!=n.state.selectedField){var a=n.board.pieceAt(n.state.selectedField);null!=a&&(i=n.board.canMove(a,n.state.selectedField,e))}return[m.piece,n.state.selectedField&&r===n.state.selectedField[0]&&o===n.state.selectedField[1]?m.selected:null,i?m.possible:null]},n.cellStyle=function(e){return[(e[0]+e[1])%2===0?m.cell1:m.cell2]},n.state={currentColor:"white",selectedField:null},n}return Object(u.a)(r,[{key:"render",value:function(){var e=this;return o.a.createElement(h.a,{style:m.container},this.board.rows.map((function(t,r){return o.a.createElement(h.a,{key:r,style:m.row},t.map((function(t,n){var i;return o.a.createElement(p.a,{key:n,onPress:function(){return e.onFieldSelected([r,n])},style:e.cellStyle([r,n]),activeOpacity:1},o.a.createElement(w.a,{style:e.pieceStyle([r,n])},null!==(i=null===t||void 0===t?void 0:t.text)&&void 0!==i?i:""))})))})),o.a.createElement(w.a,null,"Current move: ",this.state.currentColor),o.a.createElement(w.a,{style:{backgroundColor:"orange",width:50,textAlign:"center",marginTop:8},onPress:function(){e.board.rows=e.board.initialState(),e.setState({selectedField:null,currentColor:"white"})}},"Reset"))}}]),r}(o.a.Component),m=f.a.create({container:{flex:1,width:400,height:400,backgroundColor:"white",marginHorizontal:"auto",marginTop:60},row:{flexDirection:"row"},piece:{textAlign:"center",fontSize:30,width:50,height:50},cell1:{width:50,height:50,backgroundColor:"rgba(0, 0, 0, 0.1)"},cell2:{width:50,height:50,backgroundColor:"rgba(0, 0, 0, 0.4)"},selected:{backgroundColor:"rgba(255, 255, 0, 1)"},possible:{backgroundColor:"rgba(0, 255, 0, 0.5)"}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(g,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[50,1,2]]]);
//# sourceMappingURL=main.2d174269.chunk.js.map